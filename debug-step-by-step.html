<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug - Step by Step</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .debug { background: #f0f0f0; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .error { background: #ffebee; border: 1px solid #f44336; }
        .success { background: #e8f5e8; border: 1px solid #4caf50; }
        .week-card { border: 1px solid #ccc; margin: 10px 0; padding: 15px; border-radius: 8px; }
        .task-item { padding: 8px; border-bottom: 1px solid #eee; }
    </style>
</head>
<body>
    <h1>Step-by-Step Debug</h1>

    <div class="debug" id="step1">Step 1: Loading...</div>
    <div class="debug" id="step2">Step 2: Waiting...</div>
    <div class="debug" id="step3">Step 3: Waiting...</div>
    <div class="debug" id="step4">Step 4: Waiting...</div>

    <div class="month-divider" style="background: #f5f5f5; padding: 20px; margin: 20px 0; border-radius: 8px;">
        <span style="font-weight: bold; color: #666;">Month 01</span>
        <div style="border-top: 2px solid #ddd; margin: 10px 0;"></div>
        <span style="color: #007acc;">Backend & Database Foundation</span>
        <div style="border-top: 2px solid #ddd; margin: 10px 0;"></div>
        <span>0%</span>
    </div>

    <div class="weeks-grid" id="month1weeks">
        <div style="text-align: center; color: #666; padding: 40px;">
            If you see this, JavaScript didn't run...
        </div>
    </div>

    <script>
        let step1 = document.getElementById('step1');
        let step2 = document.getElementById('step2');
        let step3 = document.getElementById('step3');
        let step4 = document.getElementById('step4');

        console.log('=== DEBUG START ===');

        // Step 1: Check if we can access the DOM
        step1.innerHTML = '<span style="color: green;">✓</span> Step 1: DOM accessible';
        step1.className = 'debug success';
        console.log('Step 1: DOM accessible');

        // Step 2: Try to load roadmap data
        fetch('./roadmap.json')
            .then(response => {
                console.log('Step 2: Fetch response:', response.status);
                if (!response.ok) {
                    throw new Error('HTTP ' + response.status);
                }
                return response.json();
            })
            .then(data => {
                step2.innerHTML = '<span style="color: green;">✓</span> Step 2: Data loaded (' + data.roadmap.length + ' weeks)';
                step2.className = 'debug success';
                console.log('Step 2: Data loaded', data);

                // Step 3: Try to render
                const container = document.getElementById('month1weeks');
                if (!container) {
                    step3.innerHTML = '<span style="color: red;">✗</span> Step 3: Container not found';
                    step3.className = 'debug error';
                    console.error('Step 3: Container not found');
                    return;
                }

                step3.innerHTML = '<span style="color: green;">✓</span> Step 3: Container found';
                step3.className = 'debug success';
                console.log('Step 3: Container found');

                // Step 4: Render week cards
                container.innerHTML = '';
                const month1Weeks = data.roadmap.filter(w => w.month === 1);

                if (month1Weeks.length === 0) {
                    step4.innerHTML = '<span style="color: red;">✗</span> Step 4: No weeks found for month 1';
                    step4.className = 'debug error';
                    console.error('Step 4: No weeks for month 1');
                    return;
                }

                step4.innerHTML = '<span style="color: green;">✓</span> Step 4: Rendering ' + month1Weeks.length + ' weeks';
                step4.className = 'debug success';
                console.log('Step 4: Rendering weeks', month1Weeks);

                month1Weeks.forEach((week, index) => {
                    const card = document.createElement('div');
                    card.className = 'week-card';
                    card.innerHTML = `
                        <div style="font-weight: bold; margin-bottom: 10px; cursor: pointer;">
                            ${week.num}: ${week.title}
                        </div>
                        <div>
                            ${week.tasks.map(task => `
                                <div class="task-item">
                                    <div style="display: inline-block; margin-right: 10px;">☐</div>
                                    <div>${task.text}</div>
                                </div>
                            `).join('')}
                        </div>
                    `;
                    container.appendChild(card);
                });

                console.log('=== RENDERING COMPLETE ===');
            })
            .catch(error => {
                step2.innerHTML = '<span style="color: red;">✗</span> Step 2: Error - ' + error.message;
                step2.className = 'debug error';
                console.error('Error in debug:', error);
            });
    </script>
</body>
</html>
